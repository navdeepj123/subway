<%- include("partials/header2.ejs") %> <!-- Includes the header -->

<!-- Cart Button at the top -->
<div style="text-align: right; padding: 10px;">
    <button class="btn btn-primary" onclick="window.location.href='/cart'">
        ðŸ›’ View Cart
    </button>
</div>

<!-- Price Filter -->
<div class="filter-section" style="text-align: center; margin-bottom: 20px;">
    <label for="price-filter">Filter by Price:</label>
    <select id="price-filter" onchange="filterDesserts()">
        <option value="all">All</option>
        <option value="low">Below $7</option>
        <option value="mid">Between $7 - $9</option>
        <option value="high">Above $9</option>
    </select>
</div>

<style>
    .menu {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
    }

    .menu-item {
        width: 250px;
        height: 420px;
        background-color: #fff;
        border: 1px solid #ddd;
        padding: 20px;
        text-align: center;
        transition: transform 0.3s, box-shadow 0.3s;
        border-radius: 10px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
    }

    .menu-item:hover {
        transform: scale(1.05);
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }

    .menu-item img {
        max-width: 100%;
        max-height: 150px;
        border-radius: 10px;
        object-fit: cover;
    }

    .menu-item h3 {
        font-size: 18px;
        margin: 10px 0;
    }

    .menu-item p {
        font-size: 14px;
        flex-grow: 1;
    }

    .menu-item .calories {
        font-size: 13px;
        color: #888;
        margin-bottom: 8px;
    }

    .menu-item form {
        margin-top: auto;
    }

    .menu-item button {
        width: 100%;
    }
</style>

<section id="desserts" class="menu">
    <h2 align="center">Desserts Menu</h2>

    <div class="menu-item" data-price="6.99">
        <img src="https://imagesvc.meredithcorp.io/v3/mm/image?q=85&c=sc&poi=face&w=768&h=384&url=https:%2F%2Fstatic.onecms.io%2Fwp-content%2Fuploads%2Fsites%2F19%2F2011%2F09%2F10%2Fcrisco-double-decadence-chocolate-cake-with-glossy-frosting-768x768-1.jpg" alt="Chocolate Cake">
        <h3>Chocolate Cake</h3>
        <p class="calories">450 kcal</p>
        <p>Decadent chocolate cake with rich and creamy frosting.</p>
        <p>Price: $6.99</p>
        <form action="/add-to-cart" method="POST">
            <input type="hidden" name="name" value="Chocolate Cake">
            <input type="hidden" name="price" value="6.99">
            <input type="number" name="quantity" value="1" min="1" required>
            <button type="submit" class="btn btn-primary">Add to Cart</button>
        </form>
    </div>

    <div class="menu-item" data-price="8.99">
        <img src="https://th.bing.com/th/id/OIP.4_DSx6nDF3FRroiucbLy8wHaE7?pid=ImgDet&rs=1" alt="Tiramisu">
        <h3>Tiramisu</h3>
        <p class="calories">420 kcal</p>
        <p>Classic tiramisu with coffee-soaked ladyfingers and mascarpone.</p>
        <p>Price: $8.99</p>
        <form action="/add-to-cart" method="POST">
            <input type="hidden" name="name" value="Tiramisu">
            <input type="hidden" name="price" value="8.99">
            <input type="number" name="quantity" value="1" min="1" required>
            <button type="submit" class="btn btn-primary">Add to Cart</button>
        </form>
    </div>

    <div class="menu-item" data-price="6.99">
        <img src="https://th.bing.com/th/id/OIP.HsDaT57fP7_mWRc4noHjlQHaFX?pid=ImgDet&rs=1" alt="Molten Lava Cake">
        <h3>Molten Lava Cake</h3>
        <p class="calories">500 kcal</p>
        <p>Warm cake with gooey chocolate center and ice cream.</p>
        <p>Price: $6.99</p>
        <form action="/add-to-cart" method="POST">
            <input type="hidden" name="name" value="Molten Lava Cake">
            <input type="hidden" name="price" value="6.99">
            <input type="number" name="quantity" value="1" min="1" required>
            <button type="submit" class="btn btn-primary">Add to Cart</button>
        </form>
    </div>

    <div class="menu-item" data-price="8.99">
        <img src="https://th.bing.com/th/id/OIP.rFCNyHGdjH8jSgRoYOl_iAHaGV?pid=ImgDet&rs=1" alt="Fudge Brownie Sundae">
        <h3>Fudge Brownie Sundae</h3>
        <p class="calories">560 kcal</p>
        <p>Brownie chunks with vanilla ice cream and hot fudge.</p>
        <p>Price: $8.99</p>
        <form action="/add-to-cart" method="POST">
            <input type="hidden" name="name" value="Fudge Brownie Sundae">
            <input type="hidden" name="price" value="8.99">
            <input type="number" name="quantity" value="1" min="1" required>
            <button type="submit" class="btn btn-primary">Add to Cart</button>
        </form>
    </div>

    <div class="menu-item" data-price="5.99">
        <img src="https://th.bing.com/th/id/OIP.yr_M_kxeFOXWZMk0F1SHSQHaE8?pid=ImgDet&rs=1" alt="Chocolate Mousse">
        <h3>Chocolate Mousse</h3>
        <p class="calories">370 kcal</p>
        <p>Silky mousse topped with whipped cream and chips.</p>
        <p>Price: $5.99</p>
        <form action="/add-to-cart" method="POST">
            <input type="hidden" name="name" value="Chocolate Mousse">
            <input type="hidden" name="price" value="5.99">
            <input type="number" name="quantity" value="1" min="1" required>
            <button type="submit" class="btn btn-primary">Add to Cart</button>
        </form>
    </div>
</section>

<!-- JavaScript for price filter -->
<script>
    function filterDesserts() {
        const filter = document.getElementById("price-filter").value;
        const items = document.querySelectorAll(".menu-item");

        items.forEach(item => {
            const price = parseFloat(item.getAttribute("data-price"));

            if (filter === "all") {
                item.style.display = "flex";
            } else if (filter === "low" && price < 7) {
                item.style.display = "flex";
            } else if (filter === "mid" && price >= 7 && price <= 9) {
                item.style.display = "flex";
            } else if (filter === "high" && price > 9) {
                item.style.display = "flex";
            } else {
                item.style.display = "none";
            }
        });
    }
</script>

<%- include("partials/footer.ejs") %> <!-- Includes the footer -->
